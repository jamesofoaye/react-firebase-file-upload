{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState, createContext, useContext, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage'\r\n\r\n//Download URL context\r\nconst DownloadURLContext = createContext()\r\n\r\n//Download URL Context Provider\r\nexport const DownloadURLProvider = ({ children }) => {\r\n  const [downloadURL, setDownloadURL] = useState([])\r\n\r\n  return (\r\n    <DownloadURLContext.Provider value={{ downloadURL, setDownloadURL }}>\r\n      {children}\r\n    </DownloadURLContext.Provider>\r\n  )\r\n}\r\n\r\n// Hook to get the context\r\nexport const useDownloadURL = () => {\r\n  const { downloadURL, setDownloadURL } = useContext(DownloadURLContext)\r\n  return { downloadURL, setDownloadURL }\r\n}\r\n\r\n//File upload component\r\nexport const FirebaseFileUploader = ({ storage, accept, multiple, path }) => {\r\n  const [file, setFiles] = useState([])\r\n  const [uploadProgress, setUploadProgress] = useState({})\r\n  const [uploadStatus, setUploadStatus] = useState({})\r\n  const [errorMessage, setErrorMessage] = useState()\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!storage) {\r\n      return setErrorMessage('No firebase storage instance provided')\r\n    }\r\n\r\n    if (!path) {\r\n      return setErrorMessage('No path provided')\r\n    }\r\n\r\n    if (!accept) {\r\n      return setErrorMessage(\r\n        'No accepted file types provided, provide an array of file types you want to accept'\r\n      )\r\n    }\r\n\r\n    return setErrorMessage(null)\r\n  }, [storage, path, accept])\r\n\r\n  /** onChange event to set selected files */\r\n  const onSelectFile = (event) => {\r\n    const selectedFiles = event.target.files\r\n    const selectedFilesArray = Array.from(selectedFiles)\r\n\r\n    //prevent selecting unsupported files\r\n    if (accept && accept.length > 0) {\r\n      const unsupportedFiles = selectedFilesArray.filter(\r\n        (file) => !accept.includes(file.type)\r\n      )\r\n\r\n      if (unsupportedFiles.length > 0) {\r\n        setErrorMessage(`Unsupported file type: ${unsupportedFiles[0].type}`)\r\n\r\n        const remainingFiles = selectedFilesArray.filter(\r\n          (file) => !unsupportedFiles.includes(file)\r\n        )\r\n\r\n        return setFiles((previousFile) => previousFile.concat(remainingFiles))\r\n      }\r\n\r\n      //prevent selecting multiple files if multiple is false\r\n      if (!multiple) {\r\n        return setFiles(selectedFilesArray.slice(0, 1))\r\n      }\r\n\r\n      return setFiles((previousFile) => previousFile.concat(selectedFilesArray))\r\n    }\r\n  }\r\n\r\n  // disappear error message after 3 seconds if error message contains unsupported file type\r\n  useEffect(() => {\r\n    if (errorMessage && errorMessage.includes('Unsupported file type')) {\r\n      const timer = setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 3000)\r\n      return () => clearTimeout(timer)\r\n    }\r\n  }, [errorMessage])\r\n\r\n  // reset states when finished uploading\r\n  const onFinishUpload = () => {\r\n    setFiles([])\r\n    setUploadProgress({})\r\n    setUploadStatus({})\r\n    setErrorMessage('')\r\n  }\r\n\r\n  // upload files to firebase storage\r\n  const onUpload = async () => {\r\n    for (let i = 0; i < file.length; i++) {\r\n      const storageRef = ref(storage, `${path}/${file[i].name}`)\r\n\r\n      if (uploadStatus[file[i].name] === undefined) {\r\n        //enable loading\r\n        setLoading(true)\r\n\r\n        const uploadTask = uploadBytesResumable(storageRef, file[i])\r\n\r\n        uploadTask.on(\r\n          'state_changed',\r\n          (snapshot) => {\r\n            const progress =\r\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n\r\n            //upload progress for each file\r\n            setUploadProgress((prevProgress) => ({\r\n              ...prevProgress,\r\n              [file[i].name]: progress\r\n            }))\r\n\r\n            switch (snapshot.state) {\r\n              case 'paused':\r\n                console.log('Upload is paused')\r\n                break\r\n              case 'running':\r\n                console.log('Upload is running')\r\n                break\r\n            }\r\n          },\r\n          (error) => {\r\n            // A full list of error codes is available at\r\n            // https://firebase.google.com/docs/storage/web/handle-errors\r\n            switch (error.code) {\r\n              case 'storage/unauthorized':\r\n                // User doesn't have permission to access the object\r\n                setErrorMessage(\r\n                  \"User doesn't have permission to access the object\"\r\n                )\r\n                setLoading(false)\r\n                break\r\n              case 'storage/canceled':\r\n                // User canceled the upload\r\n                setErrorMessage('User canceled the upload')\r\n                setLoading(false)\r\n                break\r\n\r\n              // ...\r\n\r\n              case 'storage/unknown':\r\n                // Unknown error occurred, inspect error.serverResponse\r\n                setErrorMessage(\r\n                  'Unknown error occurred, inspect error.serverResponse'\r\n                )\r\n                setLoading(false)\r\n                break\r\n            }\r\n          },\r\n          () => {\r\n            // Upload completed successfully, now we can get the download URL\r\n            getDownloadURL(uploadTask.snapshot.ref).then((download_url) => {\r\n              //download url for each file\r\n              setDownloadURL((prevURL) => [...prevURL, download_url])\r\n\r\n              //stop loading\r\n              setLoading(false)\r\n            })\r\n          }\r\n        )\r\n\r\n        //upload status\r\n        const state = (await uploadTask).state\r\n\r\n        setUploadStatus((prevStatus) => ({\r\n          ...prevStatus,\r\n          [file[i].name]: state\r\n        }))\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <section className='text-black my-8 pb-4 mx-2 bg-white rounded-md max-w-md overflow-y-auto h-auto'>\r\n        <label className='flex cursor-pointer border-2 border-cyan-500 mx-auto justify-center items-center rounded-xl w-44 h-12 text-lg text-cyan-500 font-semibold'>\r\n          <svg\r\n            xmlns='http://www.w3.org/2000/svg'\r\n            className='h-6 w-6 mr-2'\r\n            fill='none'\r\n            viewBox='0 0 24 24'\r\n            stroke='currentColor'\r\n            strokeWidth={2}\r\n          >\r\n            <path\r\n              strokeLinecap='round'\r\n              strokeLinejoin='round'\r\n              d='M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z'\r\n            />\r\n          </svg>\r\n          Choose Files\r\n          <input\r\n            type='file'\r\n            name='files'\r\n            onChange={onSelectFile}\r\n            multiple={multiple}\r\n            accept={accept}\r\n            className='hidden'\r\n            disabled={!storage || !path}\r\n          />\r\n        </label>\r\n\r\n        <div className='flex flex-wrap justify-center mt-4'>\r\n          {errorMessage && (\r\n            <p className='text-red-600 text-center'>{errorMessage}</p>\r\n          )}\r\n        </div>\r\n\r\n        {file?.map((files, index) => {\r\n          return (\r\n            <div key={index} className='border-b border-slate-800'>\r\n              <div className='flex py-2 max-w-md mx-auto'>\r\n                <button\r\n                  onClick={() => {\r\n                    setFiles(file.filter((e) => e !== files))\r\n                  }}\r\n                  className='flex items-center justify-center translate-x-3 -translate-y-1 border text-md text-white font-bold border-white bg-red-600 text-center h-6 w-6 rounded-full'\r\n                >\r\n                  X\r\n                </button>\r\n\r\n                {files.type === 'application/pdf' ? (\r\n                  <svg\r\n                    xmlns='http://www.w3.org/2000/svg'\r\n                    x='0'\r\n                    y='0'\r\n                    enableBackground='new 0 0 303.188 303.188'\r\n                    version='1.1'\r\n                    viewBox='0 0 303.188 303.188'\r\n                    xmlSpace='preserve'\r\n                    height='40px'\r\n                    width='40px'\r\n                  >\r\n                    <path\r\n                      fill='#E8E8E8'\r\n                      d='M219.821 0L32.842 0 32.842 303.188 270.346 303.188 270.346 50.525z'\r\n                    ></path>\r\n                    <path\r\n                      fill='#FB3449'\r\n                      d='M230.013 149.935c-3.643-6.493-16.231-8.533-22.006-9.451-4.552-.724-9.199-.94-13.803-.936-3.615-.024-7.177.154-10.693.354-1.296.087-2.579.199-3.861.31a93.594 93.594 0 01-3.813-4.202c-7.82-9.257-14.134-19.755-19.279-30.664 1.366-5.271 2.459-10.772 3.119-16.485 1.205-10.427 1.619-22.31-2.288-32.251-1.349-3.431-4.946-7.608-9.096-5.528-4.771 2.392-6.113 9.169-6.502 13.973-.313 3.883-.094 7.776.558 11.594.664 3.844 1.733 7.494 2.897 11.139a165.324 165.324 0 003.588 9.943 171.593 171.593 0 01-2.63 7.603c-2.152 5.643-4.479 11.004-6.717 16.161l-3.465 7.507c-3.576 7.855-7.458 15.566-11.815 23.02-10.163 3.585-19.283 7.741-26.857 12.625-4.063 2.625-7.652 5.476-10.641 8.603-2.822 2.952-5.69 6.783-5.941 11.024-.141 2.394.807 4.717 2.768 6.137 2.697 2.015 6.271 1.881 9.4 1.225 10.25-2.15 18.121-10.961 24.824-18.387 4.617-5.115 9.872-11.61 15.369-19.465l.037-.054c9.428-2.923 19.689-5.391 30.579-7.205 4.975-.825 10.082-1.5 15.291-1.974 3.663 3.431 7.621 6.555 11.939 9.164 3.363 2.069 6.94 3.816 10.684 5.119 3.786 1.237 7.595 2.247 11.528 2.886 1.986.284 4.017.413 6.092.335 4.631-.175 11.278-1.951 11.714-7.57.134-1.72-.237-3.228-.98-4.55zm-110.869 10.31a170.827 170.827 0 01-6.232 9.041c-4.827 6.568-10.34 14.369-18.322 17.286-1.516.554-3.512 1.126-5.616 1.002-1.874-.11-3.722-.937-3.637-3.065.042-1.114.587-2.535 1.423-3.931.915-1.531 2.048-2.935 3.275-4.226 2.629-2.762 5.953-5.439 9.777-7.918 5.865-3.805 12.867-7.23 20.672-10.286-.449.71-.897 1.416-1.34 2.097zm27.222-84.26a38.169 38.169 0 01-.323-10.503 24.858 24.858 0 011.038-4.952c.428-1.33 1.352-4.576 2.826-4.993 2.43-.688 3.177 4.529 3.452 6.005 1.566 8.396.186 17.733-1.693 25.969-.299 1.31-.632 2.599-.973 3.883a121.219 121.219 0 01-1.648-4.821c-1.1-3.525-2.106-7.091-2.679-10.588zm16.683 66.28a236.508 236.508 0 00-25.979 5.708c.983-.275 5.475-8.788 6.477-10.555 4.721-8.315 8.583-17.042 11.358-26.197 4.9 9.691 10.847 18.962 18.153 27.214.673.749 1.357 1.489 2.053 2.22-4.094.441-8.123.978-12.062 1.61zm61.744 11.694c-.334 1.805-4.189 2.837-5.988 3.121-5.316.836-10.94.167-16.028-1.542-3.491-1.172-6.858-2.768-10.057-4.688-3.18-1.921-6.155-4.181-8.936-6.673 3.429-.206 6.9-.341 10.388-.275 3.488.035 7.003.211 10.475.664 6.511.726 13.807 2.961 18.932 7.186 1.009.833 1.331 1.569 1.214 2.207z'\r\n                    ></path>\r\n                    <path\r\n                      fill='#FB3449'\r\n                      d='M227.64 25.263L32.842 25.263 32.842 0 219.821 0z'\r\n                    ></path>\r\n                    <g fill='#A4A9AD'>\r\n                      <path d='M126.841 241.152c0 5.361-1.58 9.501-4.742 12.421-3.162 2.921-7.652 4.381-13.472 4.381h-3.643v15.917H92.022v-47.979h16.606c6.06 0 10.611 1.324 13.652 3.971 3.041 2.647 4.561 6.41 4.561 11.289zm-21.856 6.235h2.363c1.947 0 3.495-.546 4.644-1.641 1.149-1.094 1.723-2.604 1.723-4.529 0-3.238-1.794-4.857-5.382-4.857h-3.348v11.027zM175.215 248.864c0 8.007-2.205 14.177-6.613 18.509s-10.606 6.498-18.591 6.498h-15.523v-47.979h16.606c7.701 0 13.646 1.969 17.836 5.907 4.189 3.938 6.285 9.627 6.285 17.065zm-13.455.46c0-4.398-.87-7.657-2.609-9.78-1.739-2.122-4.381-3.183-7.926-3.183h-3.773v26.877h2.888c3.939 0 6.826-1.143 8.664-3.43 1.837-2.285 2.756-5.78 2.756-10.484zM196.579 273.871h-12.766v-47.979h28.355v10.403h-15.589v9.156h14.374v10.403h-14.374v18.017z'></path>\r\n                    </g>\r\n                    <path\r\n                      fill='#D1D3D3'\r\n                      d='M219.821 50.525L270.346 50.525 219.821 0z'\r\n                    ></path>\r\n                  </svg>\r\n                ) : (\r\n                  <img\r\n                    src={URL.createObjectURL(files)}\r\n                    height='40px'\r\n                    width='40px'\r\n                    alt='Preview'\r\n                  />\r\n                )}\r\n\r\n                <p className='truncate my-auto px-4'>{files.name}</p>\r\n              </div>\r\n\r\n              {uploadProgress[files.name] && (\r\n                <div className='relative mb-1 px-1'>\r\n                  <div className='flex items-center justify-end'>\r\n                    <div className='text-right'>\r\n                      <span className='text-md font-semibold inline-block'>\r\n                        {Math.round(uploadProgress[files.name])}%\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div className='overflow-hidden h-2 mb-1 text-xs flex rounded bg-white'>\r\n                    <div\r\n                      className='shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-green rounded-full'\r\n                      style={{\r\n                        width: `${Math.round(uploadProgress[files.name])}%`\r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        })}\r\n\r\n        {file.length > 0 && (\r\n          <React.Fragment>\r\n            <div className='flex'>\r\n              {!loading ? (\r\n                <button\r\n                  className='bg-cyan-500 hover:shadow-lg shadow-cyan-500/50 flex text-white font-bold py-2 px-4 rounded mt-5 mx-auto'\r\n                  onClick={onUpload}\r\n                >\r\n                  <svg\r\n                    xmlns='http://www.w3.org/2000/svg'\r\n                    className='h-6 w-6 mr-2'\r\n                    fill='none'\r\n                    viewBox='0 0 24 24'\r\n                    stroke='currentColor'\r\n                    strokeWidth={2}\r\n                  >\r\n                    <path\r\n                      strokeLinecap='round'\r\n                      strokeLinejoin='round'\r\n                      d='M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12'\r\n                    />\r\n                  </svg>\r\n                  Upload\r\n                </button>\r\n              ) : (\r\n                <button className='py-2 px-4 rounded mt-5 mx-auto flex justify-center items-center bg-cyan-500 hover:shadow-lg shadow-cyan-500/50 text-white text-center'>\r\n                  <svg\r\n                    width='20'\r\n                    height='20'\r\n                    fill='currentColor'\r\n                    className='mr-2 animate-spin'\r\n                    viewBox='0 0 1792 1792'\r\n                    xmlns='http://www.w3.org/2000/svg'\r\n                  >\r\n                    <path d='M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z'></path>\r\n                  </svg>\r\n                  Uploading\r\n                </button>\r\n              )}\r\n\r\n              {/** Reset States When Done Uploading */}\r\n              {uploadStatus[file[0].name] === 'success' && (\r\n                <button\r\n                  className='bg-cyan-500 hover:shadow-lg shadow-cyan-500/50 flex text-white font-bold py-2 px-4 rounded mt-5 mx-auto'\r\n                  onClick={onFinishUpload}\r\n                >\r\n                  Done\r\n                </button>\r\n              )}\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nFirebaseFileUploader.propTypes = {\r\n  /** firebase storage instance. */\r\n  storage: PropTypes.object.isRequired,\r\n  /** accepted files types. */\r\n  accept: PropTypes.array.isRequired,\r\n  /** allow multiple files */\r\n  multiple: PropTypes.bool,\r\n  /** directory to store the files */\r\n  path: PropTypes.string.isRequired\r\n}\r\n"],"names":["DownloadURLContext","createContext","DownloadURLProvider","children","downloadURL","setDownloadURL","useState","useDownloadURL","useContext","FirebaseFileUploader","storage","accept","multiple","path","file","setFiles","uploadProgress","setUploadProgress","uploadStatus","setUploadStatus","errorMessage","setErrorMessage","loading","setLoading","useEffect","onSelectFile","event","selectedFiles","target","files","selectedFilesArray","Array","from","length","unsupportedFiles","filter","includes","type","remainingFiles","previousFile","concat","slice","timer","setTimeout","clearTimeout","onFinishUpload","onUpload","i","storageRef","ref","name","undefined","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","prevProgress","state","console","log","error","code","getDownloadURL","then","download_url","prevURL","prevStatus","map","index","e","URL","createObjectURL","Math","round","width","propTypes","PropTypes","object","isRequired","array","bool","string"],"mappings":"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"}